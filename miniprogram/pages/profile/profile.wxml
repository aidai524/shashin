<!--pages/profile/profile.wxml-->
<view class="page">
  <!-- 未登录状态 -->
  <view wx:if="{{!hasLogin}}" class="not-login-container">
    <view class="logo-section">
      <view class="logo">📸</view>
      <text class="app-name">Shashin AI</text>
      <text class="app-desc">AI 智能拍照生成</text>
    </view>

    <view class="login-section">
      <button class="login-btn" bindtap="handleWechatLogin">
        <view class="btn-content">
          <text class="wechat-icon">微信</text>
          <text class="btn-text">微信一键登录</text>
        </view>
      </button>
      <text class="login-tip">登录后可使用完整功能</text>
    </view>

    <view class="features-section">
      <view class="feature-item">
        <text class="feature-icon">✨</text>
        <text class="feature-text">多种风格模板</text>
      </view>
      <view class="feature-item">
        <text class="feature-icon">👤</text>
        <text class="feature-text">角色形象训练</text>
      </view>
      <view class="feature-item">
        <text class="feature-icon">🎨</text>
        <text class="feature-text">AI 智能生成</text>
      </view>
    </view>
  </view>

  <!-- 已登录状态 -->
  <view wx:else class="login-container">
    <!-- 用户信息卡片 -->
    <view class="user-card">
      <view class="user-avatar">
        <image
          wx:if="{{userInfo.avatar}}"
          class="avatar-img"
          src="{{userInfo.avatar}}"
        />
        <text wx:else class="avatar-placeholder">{{userInfo.nickname ? userInfo.nickname.charAt(0) : 'U'}}</text>
      </view>
      <view class="user-info">
        <text class="user-name">{{userInfo.nickname || userInfo.email || '用户'}}</text>
        <view class="plan-badge">
          <text class="plan-text">{{plan.name || '免费版'}}</text>
        </view>
      </view>
    </view>

    <!-- 功能列表 -->
    <view class="menu-section">
      <view class="menu-item" bindtap="gotoCharacters">
        <view class="menu-left">
          <text class="menu-icon">👥</text>
          <text class="menu-title">我的角色</text>
        </view>
        <text class="menu-arrow">›</text>
      </view>

      <view class="menu-item" bindtap="gotoSettings">
        <view class="menu-left">
          <text class="menu-icon">⚙️</text>
          <text class="menu-title">设置</text>
        </view>
        <text class="menu-arrow">›</text>
      </view>

      <view class="menu-item" bindtap="gotoHome">
        <view class="menu-left">
          <text class="menu-icon">🏠</text>
          <text class="menu-title">返回首页</text>
        </view>
        <text class="menu-arrow">›</text>
      </view>
    </view>

    <!-- 退出登录 -->
    <view class="logout-section">
      <button class="logout-btn" bindtap="handleLogout">退出登录</button>
    </view>
  </view>
</view>
