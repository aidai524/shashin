<!--pages/detail/detail.wxml-->
<view class="page">
  <!-- ä¸»å›¾ç‰‡å±•ç¤ºåŒºåŸŸ -->
  <view class="main-image-container">
    <image
      class="main-image"
      src="{{currentImage.fullUrl}}"
      mode="aspectFit"
      bindtap="handleImageTap"
    />

    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="image-loading">
      <view class="spinner"></view>
    </view>
  </view>

  <!-- åº•éƒ¨é¢„è§ˆåˆ—è¡¨ -->
  <view class="thumbnail-list-container">
    <scroll-view class="thumbnail-scroll" scroll-x="{{true}}" scroll-into-view="{{thumbScrollId}}">
      <view class="thumbnail-list">
        <view
          wx:for="{{images}}"
          wx:key="index"
          id="thumb-{{index}}"
          class="thumbnail-item {{currentImageIndex === index ? 'active' : ''}}"
          bindtap="handleThumbnailTap"
          data-index="{{index}}"
        >
          <image
            class="thumbnail-image"
            src="{{item.thumbUrl}}"
            mode="aspectFill"
            lazy-load="{{true}}"
          />
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- å³ä¸Šè§’æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <!-- åˆ†äº«æŒ‰é’® -->
    <view class="action-btn share-btn" bindtap="handleShare">
      <text class="btn-icon">â†—</text>
    </view>
    <!-- æ›´å¤šæŒ‰é’® -->
    <view class="action-btn more-btn" bindtap="toggleMoreMenu">
      <text class="btn-icon">â‹¯</text>
    </view>
  </view>

  <!-- æ›´å¤šæ“ä½œèœå• -->
  <view wx:if="{{showMoreMenu}}" class="more-menu-mask" bindtap="toggleMoreMenu">
    <view class="more-menu" catchtap="">
      <view class="menu-item" bindtap="handleDownload">
        <text class="menu-icon">â¬‡</text>
        <text class="menu-text">ä¸‹è½½å›¾ç‰‡</text>
      </view>
      <view class="menu-item" bindtap="handleDelete">
        <text class="menu-icon">ðŸ—‘</text>
        <text class="menu-text">åˆ é™¤</text>
      </view>
    </view>
  </view>
</view>
