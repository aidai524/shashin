<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="theme-color" content="#0a0a0f" />
        <meta name="description" content="‰ΩøÁî® Google Gemini AI ÁîüÊàêÁ≤æÁæéÂõæÁâá - Ê¢¶ÊÉ≥ÁÖßÁõ∏È¶ÜÂÜôÁúüÈ¶Ü" />
        <title>Ê¢¶ÊÉ≥ÁÖßÁõ∏È¶Ü - AI ÂõæÁâáÁîüÊàêÂô®</title>
        <!-- Âú® CSS Âä†ËΩΩÂâçËÆæÁΩÆ‰∏ªÈ¢òÔºåÈÅøÂÖçÈó™ÁÉÅ -->
        <script>
            (function() {
                var theme = localStorage.getItem('gemini_theme') || 'dark';
                document.documentElement.setAttribute('data-theme', theme);
                var meta = document.querySelector('meta[name="theme-color"]');
                if (meta) meta.content = theme === 'light' ? '#f0f0f5' : '#0a0a0f';
            })();
        </script>
        <link rel="stylesheet" href="style.css" />
        <!-- Phosphor Icons -->
        <script src="https://unpkg.com/@phosphor-icons/web@2.1.1"></script>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåå</text></svg>" />
    </head>
    <body>
        <!-- Neo-Tokyo ËÉåÊôØÂ±Ç -->
        <div class="cosmic-bg" aria-hidden="true"></div>
        <div class="grid-overlay" aria-hidden="true"></div>

        <div class="container">
            <header>
                <div class="header-controls">
                    <button class="theme-switch-btn" id="themeSwitchBtn" onclick="toggleTheme()" aria-label="Toggle theme">
                        <i class="ph ph-moon"></i>
                    </button>
                <button class="lang-switch-btn" id="langSwitchBtn" onclick="switchLanguage()" aria-label="Switch language">EN</button>
                    <!-- Áî®Êà∑Ë¥¶Âè∑ -->
                    <div class="user-menu" id="userMenu">
                        <button class="user-btn" id="loginBtn" onclick="showAuthModal('login')">
                            <i class="ph ph-user"></i>
                            <span data-i18n="auth.login">ÁôªÂΩï</span>
                        </button>
                        <div class="user-dropdown" id="userDropdown" style="display: none;">
                            <div class="user-info">
                                <span class="user-avatar" id="userAvatar"><i class="ph ph-user"></i></span>
                                <div class="user-details">
                                    <span class="user-name" id="userName"></span>
                                    <span class="user-plan" id="userPlanBadge"></span>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="#" onclick="showCharactersModal(); return false;" class="dropdown-item">
                                <i class="ph ph-user-circle"></i> <span data-i18n="user.characters">ÊàëÁöÑËßíËâ≤</span>
                            </a>
                            <a href="#" onclick="showSettingsModal(); return false;" class="dropdown-item">
                                <i class="ph ph-gear"></i> <span data-i18n="user.settings">Ë¥¶Âè∑ËÆæÁΩÆ</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" onclick="logout(); return false;" class="dropdown-item text-danger">
                                <i class="ph ph-sign-out"></i> <span data-i18n="auth.logout">ÈÄÄÂá∫ÁôªÂΩï</span>
                            </a>
                        </div>
                    </div>
                </div>
                <h1><i class="ph ph-atom"></i> <span data-i18n="site.title">Ê¢¶ÊÉ≥ÁÖßÁõ∏È¶Ü</span></h1>
                <p class="subtitle" data-i18n="site.subtitle">POWERED BY GEMINI AI // ÂàõÈÄ†Â±û‰∫é‰Ω†ÁöÑÊï∞Â≠óÂπªË±°</p>
            </header>

            <main>
                <!-- Ê≠•È™§ 1: ÈÄâÊã©Ê®°Êùø -->
                <section class="template-section">
                    <div class="section-header">
                        <h2><span class="step-number">1</span> <span data-i18n="template.title">ÈÄâÊã©È£éÊ†ºÊ®°Êùø</span></h2>
                        <p class="section-desc" data-i18n="template.desc">ÁÇπÂáªÈÄâÊã©‰Ω†ÂñúÊ¨¢ÁöÑÈ£éÊ†ºÔºåAI Â∞ÜÊåâÊ≠§È£éÊ†ºÁîüÊàêÂõæÁâá</p>
                    </div>
                    
                    <!-- Ê®°ÊùøÂàÜÁ±ªÊ†áÁ≠æ -->
                    <div class="template-categories" id="templateCategories">
                        <button type="button" class="category-btn active" data-category="all" data-i18n="template.category.all">ÂÖ®ÈÉ®</button>
                        <button type="button" class="category-btn" data-category="portrait" data-i18n="template.category.portrait">‰∫∫ÂÉèÂÜôÁúü</button>
                        <button type="button" class="category-btn" data-category="creative" data-i18n="template.category.creative">ÂàõÊÑèËâ∫ÊúØ</button>
                        <button type="button" class="category-btn" data-category="scene" data-i18n="template.category.scene">Âú∫ÊôØÂêàÊàê</button>
                    </div>
                    
                    <!-- Ê®°ÊùøÁΩëÊ†º -->
                    <div class="template-grid" id="templateGrid">
                        <!-- Ê®°ÊùøÂç°ÁâáÁî± JS Âä®ÊÄÅÁîüÊàê -->
                    </div>
                    
                    <!-- Â∑≤ÈÄâÊ®°ÊùøËØ¶ÊÉÖ -->
                    <div class="selected-template" id="selectedTemplate" style="display: none;">
                        <div class="selected-template-preview">
                            <img id="selectedTemplateImg" src="" alt="Selected template" />
                        </div>
                        <div class="selected-template-info">
                            <h3 id="selectedTemplateName"></h3>
                            <p id="selectedTemplateDesc"></p>
                            <button type="button" class="btn btn-small btn-secondary" onclick="clearTemplateSelection()">
                                <i class="ph ph-x"></i> <span data-i18n="template.change">Êõ¥Êç¢Ê®°Êùø</span>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Ê≠•È™§ 2: ÈÄâÊã©ËßíËâ≤ -->
                <section class="generate-section">
                    <div class="section-header">
                        <h2><span class="step-number">2</span> <span data-i18n="characters.select.title">ÈÄâÊã©ËßíËâ≤</span></h2>
                        <p class="section-desc" data-i18n="characters.select.desc">ÈÄâÊã©‰∏Ä‰∏™Â∑≤ÂàõÂª∫ÁöÑËßíËâ≤ÔºåAI Â∞Ü‰ΩøÁî®ÂÖ∂ÁÖßÁâáËøõË°åÈîÅËÑ∏ÁîüÊàê</p>
                    </div>

                    <!-- Êú™ÁôªÂΩïÊèêÁ§∫ -->
                    <div class="login-required-notice" id="loginRequiredNotice">
                        <div class="notice-icon"><i class="ph ph-lock-key"></i></div>
                        <p data-i18n="characters.login.required">ËØ∑ÂÖàÁôªÂΩïÂêéÂàõÂª∫ËßíËâ≤</p>
                        <button class="btn btn-primary" onclick="showAuthModal('login')">
                            <span data-i18n="auth.login">ÁôªÂΩï</span>
                        </button>
                        </div>
                    
                    <!-- ËßíËâ≤ÈÄâÊã©Âô®ÔºàÂ∑≤ÁôªÂΩïÁî®Êà∑ÂèØËßÅÔºâ -->
                    <div class="form-group character-select-group" id="characterSelectGroup" style="display: none;">
                        <div class="character-selector" id="characterSelector">
                            <!-- Áî± JS Âä®ÊÄÅÁîüÊàê -->
                        </div>
                        <p class="form-hint">
                            <a href="#" onclick="showCharactersModal(); return false;" style="color: var(--accent-rose);">
                                <i class="ph ph-user-circle"></i> <span data-i18n="user.characters">ÁÆ°ÁêÜÊàëÁöÑËßíËâ≤</span>
                            </a>
                        </p>
                    </div>

                    <!-- Êó†ËßíËâ≤ÊèêÁ§∫ -->
                    <div class="no-characters-notice" id="noCharactersNotice" style="display: none;">
                        <div class="notice-icon"><i class="ph ph-user-circle"></i></div>
                        <p data-i18n="characters.empty.notice">‰Ω†ËøòÊ≤°ÊúâÂàõÂª∫ËßíËâ≤</p>
                        <p class="notice-hint" data-i18n="characters.empty.notice.hint">ÂàõÂª∫ËßíËâ≤Âπ∂‰∏ä‰º†ÁÖßÁâáÂêéÔºåÂç≥ÂèØ‰ΩøÁî®ÈîÅËÑ∏ÂäüËÉΩÁîüÊàêÂõæÁâá</p>
                        <button class="btn btn-primary" onclick="showAddCharacterForm()">
                            <i class="ph ph-plus"></i> <span data-i18n="characters.add">Ê∑ªÂä†ËßíËâ≤</span>
                        </button>
                    </div>
                </section>

                <!-- Ê≠•È™§ 3: Ë∞ÉÊï¥ÂèÇÊï∞ - ÊäòÂè†ÂºèËÆæËÆ° -->
                <section class="settings-section">
                    <div class="section-header">
                        <h2><span class="step-number">3</span> <span data-i18n="settings.title">Ë∞ÉÊï¥ËÆæÁΩÆ</span></h2>
                        <p class="section-desc" data-i18n="settings.desc">ÁÇπÂáªÈÄâÈ°πÂèØÂ±ïÂºÄË∞ÉÊï¥ÔºåÈªòËÆ§‰∏∫Êé®ËçêÈÖçÁΩÆ</p>
                    </div>

                    <!-- ÊäòÂè†ÂºèÂèÇÊï∞ËÆæÁΩÆ -->
                    <div class="settings-compact">
                        <!-- ÂÆΩÈ´òÊØî -->
                        <div class="setting-item" data-setting="aspectRatio">
                            <div class="setting-header" onclick="toggleSetting('aspectRatio')">
                                <div class="setting-info">
                                    <i class="ph ph-rectangle"></i>
                                    <span class="setting-label" data-i18n="aspectratio.label">ÂÆΩÈ´òÊØî</span>
                                </div>
                                <div class="setting-value">
                                    <div class="setting-preview" id="aspectRatioPreview">
                                        <div class="aspect-icon-mini" style="width: 16px; height: 16px;"></div>
                                        <span>1:1</span>
                                    </div>
                                    <i class="ph ph-caret-down setting-arrow"></i>
                                </div>
                            </div>
                            <div class="setting-options" id="aspectRatioOptions">
                                <div class="aspect-ratio-grid" id="aspectRatioGrid">
                                    <button type="button" class="aspect-btn active" data-ratio="1:1" title="1:1 Ê≠£ÊñπÂΩ¢">
                                        <div class="aspect-icon" style="width: 28px; height: 28px;"></div>
                                        <span>1:1</span>
                                    </button>
                                    <button type="button" class="aspect-btn" data-ratio="16:9" title="16:9 Ê®™Â±è">
                                        <div class="aspect-icon" style="width: 36px; height: 20px;"></div>
                                        <span>16:9</span>
                                    </button>
                                    <button type="button" class="aspect-btn" data-ratio="9:16" title="9:16 Á´ñÂ±è">
                                        <div class="aspect-icon" style="width: 20px; height: 36px;"></div>
                                        <span>9:16</span>
                                    </button>
                                    <button type="button" class="aspect-btn" data-ratio="4:3" title="4:3 Ê†áÂáÜ">
                                        <div class="aspect-icon" style="width: 32px; height: 24px;"></div>
                                        <span>4:3</span>
                                    </button>
                                    <button type="button" class="aspect-btn" data-ratio="3:4" title="3:4 Á´ñÂ±è">
                                        <div class="aspect-icon" style="width: 24px; height: 32px;"></div>
                                        <span>3:4</span>
                                    </button>
                                    <button type="button" class="aspect-btn" data-ratio="3:2" title="3:2 ÁÖßÁâá">
                                        <div class="aspect-icon" style="width: 33px; height: 22px;"></div>
                                        <span>3:2</span>
                                    </button>
                                    <button type="button" class="aspect-btn" data-ratio="2:3" title="2:3 Á´ñÁâà">
                                        <div class="aspect-icon" style="width: 22px; height: 33px;"></div>
                                        <span>2:3</span>
                                    </button>
                                    <button type="button" class="aspect-btn" data-ratio="21:9" title="21:9 Ë∂ÖÂÆΩ">
                                        <div class="aspect-icon" style="width: 42px; height: 18px;"></div>
                                        <span>21:9</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- ÁîüÊàêË¥®Èáè -->
                        <div class="setting-item" data-setting="model">
                            <div class="setting-header" onclick="toggleSetting('model')">
                                <div class="setting-info">
                                    <i class="ph ph-star"></i>
                                    <span class="setting-label" data-i18n="model.label">ÁîüÊàêË¥®Èáè</span>
                                </div>
                                <div class="setting-value">
                                    <div class="setting-preview" id="modelPreview">
                                        <i class="ph-fill ph-star"></i>
                                        <span data-i18n="model.premium">È´òÁ∫ß</span>
                                    </div>
                                    <i class="ph ph-caret-down setting-arrow"></i>
                                </div>
                            </div>
                            <div class="setting-options" id="modelOptions">
                                <div class="model-toggle" id="modelToggle">
                                    <button type="button" class="model-btn active" data-model="gemini-3-pro-image-preview">
                                        <span class="model-icon"><i class="ph-fill ph-star"></i></span>
                                        <span class="model-name" data-i18n="model.premium">È´òÁ∫ß</span>
                                        <span class="model-desc" data-i18n="model.premium.desc">4K È´òÊ∏Ö</span>
                                    </button>
                                    <button type="button" class="model-btn" data-model="gemini-2.5-flash-image">
                                        <span class="model-icon"><i class="ph-fill ph-lightning"></i></span>
                                        <span class="model-name" data-i18n="model.fast">Âø´ÈÄü</span>
                                        <span class="model-desc" data-i18n="model.fast.desc">Ê†áÂáÜÁîªË¥®</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- ÁîüÊàêÊï∞Èáè -->
                        <div class="setting-item" data-setting="quantity">
                            <div class="setting-header" onclick="toggleSetting('quantity')">
                                <div class="setting-info">
                                    <i class="ph ph-images"></i>
                                    <span class="setting-label" data-i18n="quantity.label">ÁîüÊàêÊï∞Èáè</span>
                                </div>
                                <div class="setting-value">
                                    <div class="setting-preview" id="quantityPreview">
                                        <span class="qty-badge">1</span>
                                        <span>Âº† ¬∑ ~30Áßí</span>
                                    </div>
                                    <i class="ph ph-caret-down setting-arrow"></i>
                                </div>
                            </div>
                            <div class="setting-options" id="quantityOptions">
                                <div class="quantity-selector" id="quantitySelector">
                                    <button type="button" class="quantity-btn active" data-count="1">
                                        <span class="quantity-num">1</span>
                                        <span class="quantity-time">~30Áßí</span>
                                    </button>
                                    <button type="button" class="quantity-btn" data-count="2">
                                        <span class="quantity-num">2</span>
                                        <span class="quantity-time">~60Áßí</span>
                                    </button>
                                    <button type="button" class="quantity-btn" data-count="4">
                                        <span class="quantity-num">4</span>
                                        <span class="quantity-time">~2ÂàÜÈíü</span>
                                    </button>
                        </div>
                    </div>
                        </div>

                        <!-- ÁîªË¥®/ÂàÜËæ®Áéá -->
                        <div class="setting-item" data-setting="resolution" id="resolutionGroup">
                            <div class="setting-header" onclick="toggleSetting('resolution')">
                                <div class="setting-info">
                                    <i class="ph ph-high-definition"></i>
                                    <span class="setting-label" data-i18n="resolution.label">ÁîªË¥®</span>
                                </div>
                                <div class="setting-value">
                                    <div class="setting-preview" id="resolutionPreview">
                                        <span class="res-badge">4K</span>
                                        <span>Ë∂ÖÊ∏Ö</span>
                                    </div>
                                    <i class="ph ph-caret-down setting-arrow"></i>
                                </div>
                            </div>
                            <div class="setting-options" id="resolutionOptions">
                                <div class="resolution-selector" id="resolutionSelector">
                                    <button type="button" class="resolution-btn" data-size="1K">
                                        <span class="resolution-label">Ê†áÂáÜ</span>
                                        <span class="resolution-size">1K</span>
                                    </button>
                                    <button type="button" class="resolution-btn" data-size="2K">
                                        <span class="resolution-label">È´òÊ∏Ö</span>
                                        <span class="resolution-size">2K</span>
                                    </button>
                                    <button type="button" class="resolution-btn active" data-size="4K">
                                        <span class="resolution-label">Ë∂ÖÊ∏Ö</span>
                                        <span class="resolution-size">4K</span>
                                    </button>
                                </div>
                                <p class="form-hint resolution-hint" id="resolutionHint" data-i18n="resolution.hint.supported">
                                    È´òÁ∫ßÊ®°ÂºèÊîØÊåÅ 1K/2K/4K ÂàÜËæ®Áéá
                                </p>
                            </div>
                        </div>
                    </div>

                    <button
                        class="btn btn-primary btn-generate"
                        id="generateBtn"
                        onclick="generateImage()"
                    >
                        <span class="btn-text"><i class="ph ph-sparkle"></i> <span data-i18n="generate.button">ÁîüÊàêÂõæÁâá</span></span>
                        <span class="btn-loading" style="display: none">
                            <span class="spinner"></span>
                            <span data-i18n="generate.loading">Âàõ‰Ωú‰∏≠...</span>
                        </span>
                    </button>
                </section>

                <!-- ÂΩìÂâçÁîüÊàêÁªìÊûú -->
                <section
                    class="result-section"
                    id="resultSection"
                    style="display: none"
                >
                    <h2><i class="ph ph-palette"></i> <span data-i18n="result.title">ÁîüÊàêÁªìÊûú</span></h2>
                    <div class="result-images" id="resultImages"></div>
                </section>

                <!-- ÂéÜÂè≤ËÆ∞ÂΩï -->
                <section class="history-section">
                    <div class="history-header">
                        <h2><i class="ph ph-clock-counter-clockwise"></i> <span data-i18n="history.title">ÂéÜÂè≤ËÆ∞ÂΩï</span></h2>
                        <button class="btn btn-danger btn-small" onclick="clearHistory()">
                            <i class="ph ph-trash"></i> <span data-i18n="history.clear">Ê∏ÖÁ©∫</span>
                        </button>
                    </div>
                    <div class="history-grid" id="historyGrid">
                        <p class="empty-tip"><i class="ph ph-image-broken"></i> <span data-i18n="history.empty">ÊöÇÊó†ÂéÜÂè≤ËÆ∞ÂΩïÔºåÂºÄÂßãÂàõ‰ΩúÂêßÔºÅ</span></p>
                    </div>
                </section>
            </main>

            <footer>
                <p data-i18n="footer.text">// SYSTEM ONLINE // GEMINI AI √ó CLOUDFLARE WORKERS //</p>
            </footer>
        </div>

        <!-- Âä†ËΩΩÂä®ÁîªÈÅÆÁΩ© -->
        <div class="loading-overlay" id="loadingOverlay">
            <!-- ËÉåÊôØËÑâÂÜ≤ÂÖâÊôï -->
            <div class="loading-pulse-bg" aria-hidden="true"></div>
            
            <!-- ËΩ®ÈÅìÁ≤íÂ≠êÁ≥ªÁªü -->
            <div class="loading-orbits" aria-hidden="true">
                <div class="orbit orbit-1"><span></span><span></span><span></span></div>
                <div class="orbit orbit-2"><span></span><span></span></div>
                <div class="orbit orbit-3"><span></span><span></span><span></span><span></span></div>
            </div>
            
            <!-- ‰∏≠ÂøÉÁîªÊ°ÜÂä®Áîª -->
            <div class="loading-canvas">
                <div class="canvas-frame">
                    <div class="canvas-inner">
                        <div class="canvas-wave"></div>
                        <div class="canvas-wave wave-2"></div>
                        <div class="canvas-wave wave-3"></div>
                    </div>
                    <div class="canvas-corners">
                        <span></span><span></span><span></span><span></span>
                    </div>
                </div>
                <div class="canvas-glow"></div>
            </div>
            
            <!-- ÊñáÂ≠óÂÜÖÂÆπ -->
            <div class="loading-content">
                <p class="loading-text" data-i18n="loading.title">Ê≠£Âú®Âàõ‰Ωú‰Ω†ÁöÑÊù∞‰Ωú...</p>
                <div class="loading-dots">
                    <span></span><span></span><span></span>
                </div>
                <p class="loading-hint" data-i18n="loading.hint">ÈÄöÂ∏∏ÈúÄË¶Å 10-30 Áßí</p>
            </div>
        </div>

        <!-- ÂõæÁâáÈ¢ÑËßàÂºπÁ™ó -->
        <div class="modal" id="imageModal" onclick="closeModal()" role="dialog" aria-modal="true">
            <div class="modal-content" onclick="event.stopPropagation()">
                <span class="modal-close" onclick="closeModal()" aria-label="Close"><i class="ph ph-x"></i></span>
                <img id="modalImage" src="" alt="Preview image" />
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="downloadImage()">
                        <i class="ph ph-download-simple"></i> <span data-i18n="modal.download">‰∏ãËΩΩÂõæÁâá</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ÂéÜÂè≤ËØ¶ÊÉÖÂºπÁ™ó -->
        <div class="modal" id="historyModal" onclick="closeHistoryModal()" role="dialog" aria-modal="true">
            <div class="modal-content modal-large" onclick="event.stopPropagation()">
                <span class="modal-close" onclick="closeHistoryModal()" aria-label="Close"><i class="ph ph-x"></i></span>
                <div class="history-detail" id="historyDetail"></div>
            </div>
        </div>

        <!-- ÁôªÂΩï/Ê≥®ÂÜåÂºπÁ™ó -->
        <div class="modal" id="authModal" onclick="closeAuthModal()" role="dialog" aria-modal="true">
            <div class="modal-content modal-auth" onclick="event.stopPropagation()">
                <span class="modal-close" onclick="closeAuthModal()" aria-label="Close"><i class="ph ph-x"></i></span>
                
                <!-- ÁôªÂΩïË°®Âçï -->
                <div class="auth-form" id="loginForm">
                    <div class="auth-header">
                        <h2><i class="ph ph-hand-waving"></i> <span data-i18n="auth.login.title">Ê¨¢ËøéÂõûÊù•</span></h2>
                        <p data-i18n="auth.login.subtitle">ÁôªÂΩï‰Ω†ÁöÑË¥¶Âè∑ÁªßÁª≠Âàõ‰Ωú</p>
                    </div>
                    <form onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label for="loginEmail" data-i18n="auth.email">ÈÇÆÁÆ±</label>
                            <input type="email" id="loginEmail" required placeholder="your@email.com" />
                        </div>
                        <div class="form-group">
                            <label for="loginPassword" data-i18n="auth.password">ÂØÜÁ†Å</label>
                            <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" />
                        </div>
                        <button type="submit" class="btn btn-primary btn-full" id="loginSubmitBtn">
                            <span data-i18n="auth.login.submit">ÁôªÂΩï</span>
                        </button>
                    </form>
                    <div class="auth-footer">
                        <p><span data-i18n="auth.no.account">ËøòÊ≤°ÊúâË¥¶Âè∑Ôºü</span> 
                            <a href="#" onclick="switchAuthForm('register'); return false;" data-i18n="auth.register.now">Á´ãÂç≥Ê≥®ÂÜå</a>
                        </p>
                    </div>
                </div>

                <!-- Ê≥®ÂÜåË°®Âçï -->
                <div class="auth-form" id="registerForm" style="display: none;">
                    <div class="auth-header">
                        <h2><i class="ph ph-confetti"></i> <span data-i18n="auth.register.title">ÂàõÂª∫Ë¥¶Âè∑</span></h2>
                        <p data-i18n="auth.register.subtitle">Âä†ÂÖ•Ê¢¶ÊÉ≥ÂÜôÁúüÈ¶ÜÔºåÂºÄÂêØ AI Âàõ‰Ωú‰πãÊóÖ</p>
                    </div>
                    <form onsubmit="handleRegister(event)">
                        <div class="form-group">
                            <label for="registerEmail" data-i18n="auth.email">ÈÇÆÁÆ±</label>
                            <input type="email" id="registerEmail" required placeholder="your@email.com" />
                        </div>
                        <div class="form-group">
                            <label for="registerNickname" data-i18n="auth.nickname">ÊòµÁß∞</label>
                            <input type="text" id="registerNickname" placeholder="‰Ω†ÁöÑÊòµÁß∞" />
                        </div>
                        <div class="form-group">
                            <label for="registerPassword" data-i18n="auth.password">ÂØÜÁ†Å</label>
                            <input type="password" id="registerPassword" required placeholder="Ëá≥Â∞ë6‰Ωç" minlength="6" />
                        </div>
                        <div class="form-group">
                            <label for="registerPasswordConfirm" data-i18n="auth.password.confirm">Á°ÆËÆ§ÂØÜÁ†Å</label>
                            <input type="password" id="registerPasswordConfirm" required placeholder="ÂÜçÊ¨°ËæìÂÖ•ÂØÜÁ†Å" minlength="6" />
                        </div>
                        <button type="submit" class="btn btn-primary btn-full" id="registerSubmitBtn">
                            <span data-i18n="auth.register.submit">Ê≥®ÂÜå</span>
                        </button>
                    </form>
                    <div class="auth-footer">
                        <p><span data-i18n="auth.have.account">Â∑≤ÊúâË¥¶Âè∑Ôºü</span> 
                            <a href="#" onclick="switchAuthForm('login'); return false;" data-i18n="auth.login.now">Á´ãÂç≥ÁôªÂΩï</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ë¥¶Âè∑ËÆæÁΩÆÂºπÁ™ó -->
        <div class="modal" id="settingsModal" onclick="closeSettingsModal()" role="dialog" aria-modal="true">
            <div class="modal-content modal-settings" onclick="event.stopPropagation()">
                <span class="modal-close" onclick="closeSettingsModal()" aria-label="Close"><i class="ph ph-x"></i></span>
                <div class="settings-content">
                    <h2><i class="ph ph-gear"></i> <span data-i18n="settings.account.title">Ë¥¶Âè∑ËÆæÁΩÆ</span></h2>
                    
                    <div class="settings-section">
                        <h3 data-i18n="settings.profile">‰∏™‰∫∫‰ø°ÊÅØ</h3>
                        <form id="profileForm" onsubmit="handleUpdateProfile(event)">
                            <div class="form-group">
                                <label for="settingsNickname" data-i18n="auth.nickname">ÊòµÁß∞</label>
                                <input type="text" id="settingsNickname" />
                            </div>
                            <button type="submit" class="btn btn-primary btn-small">
                                <span data-i18n="settings.save">‰øùÂ≠ò</span>
                            </button>
                        </form>
                    </div>

                    <div class="settings-section">
                        <h3 data-i18n="settings.plan">ÂΩìÂâçÂ•óÈ§ê</h3>
                        <div class="plan-info" id="settingsPlanInfo">
                            <div class="plan-badge" id="settingsPlanBadge">ÂÖçË¥πÁâà</div>
                            <p class="plan-limits" id="settingsPlanLimits"></p>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3 data-i18n="settings.password">‰øÆÊîπÂØÜÁ†Å</h3>
                        <form id="passwordForm" onsubmit="handleChangePassword(event)">
                            <div class="form-group">
                                <label for="oldPassword" data-i18n="settings.old.password">ÊóßÂØÜÁ†Å</label>
                                <input type="password" id="oldPassword" required minlength="6" />
                            </div>
                            <div class="form-group">
                                <label for="newPassword" data-i18n="settings.new.password">Êñ∞ÂØÜÁ†Å</label>
                                <input type="password" id="newPassword" required minlength="6" />
                            </div>
                            <button type="submit" class="btn btn-secondary btn-small">
                                <span data-i18n="settings.change.password">‰øÆÊîπÂØÜÁ†Å</span>
                            </button>
                        </form>
                    </div>

                    <div class="settings-section settings-logout">
                        <button type="button" class="btn btn-danger" onclick="logout(); closeSettingsModal();">
                            <i class="ph ph-sign-out"></i> <span data-i18n="auth.logout">ÈÄÄÂá∫ÁôªÂΩï</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ËßíËâ≤ÁÆ°ÁêÜÂºπÁ™ó -->
        <div class="modal" id="charactersModal" onclick="closeCharactersModal()" role="dialog" aria-modal="true">
            <div class="modal-content modal-characters" onclick="event.stopPropagation()">
                <span class="modal-close" onclick="closeCharactersModal()" aria-label="Close"><i class="ph ph-x"></i></span>
                <div class="characters-content">
                    <div class="characters-header">
                        <h2><i class="ph ph-user-circle"></i> <span data-i18n="characters.title">ÊàëÁöÑËßíËâ≤</span></h2>
                        <p class="characters-limit" id="charactersLimit"></p>
                    </div>
                    
                    <!-- ËßíËâ≤ÂàóË°® -->
                    <div class="characters-grid" id="charactersGrid">
                        <!-- Áî± JS Âä®ÊÄÅÁîüÊàê -->
                    </div>
                    
                    <!-- Ê∑ªÂä†ËßíËâ≤ÊåâÈíÆ -->
                    <button class="btn btn-primary btn-add-character" id="addCharacterBtn" onclick="showAddCharacterForm()">
                        <i class="ph ph-plus"></i> <span data-i18n="characters.add">Ê∑ªÂä†ËßíËâ≤</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ÁºñËæëËßíËâ≤ÂºπÁ™ó -->
        <div class="modal" id="editCharacterModal" onclick="closeEditCharacterModal()" role="dialog" aria-modal="true">
            <div class="modal-content modal-edit-character" onclick="event.stopPropagation()">
                <span class="modal-close" onclick="closeEditCharacterModal()" aria-label="Close"><i class="ph ph-x"></i></span>
                <div class="edit-character-content">
                    <h2 id="editCharacterTitle"><i class="ph ph-pencil-simple"></i> <span data-i18n="characters.edit">ÁºñËæëËßíËâ≤</span></h2>
                    
                    <form id="characterForm" onsubmit="handleSaveCharacter(event)">
                        <input type="hidden" id="characterId" />
                        <div class="form-group">
                            <label for="characterName" data-i18n="characters.name">ËßíËâ≤ÂêçÁß∞</label>
                            <input type="hidden" id="characterName" required />
                            <div class="fancy-select" id="characterSelect">
                                <div class="fancy-select-trigger" onclick="toggleFancySelect()">
                                    <span class="fancy-select-value" data-placeholder="ËØ∑ÈÄâÊã©ËßíËâ≤">ËØ∑ÈÄâÊã©ËßíËâ≤</span>
                                    <i class="ph ph-caret-down fancy-select-arrow"></i>
                                </div>
                                <div class="fancy-select-dropdown">
                                    <div class="fancy-select-group">
                                        <div class="fancy-select-group-label"><i class="ph ph-user"></i> Â∏∏Áî®</div>
                                        <div class="fancy-select-option" data-value="Êú¨‰∫∫">Êú¨‰∫∫</div>
                                        <div class="fancy-select-option" data-value="ËÄÅÂ©Ü">ËÄÅÂ©Ü</div>
                                        <div class="fancy-select-option" data-value="ËÄÅÂÖ¨">ËÄÅÂÖ¨</div>
                                        <div class="fancy-select-option" data-value="Â•≥ÂÑø">Â•≥ÂÑø</div>
                                        <div class="fancy-select-option" data-value="ÂÑøÂ≠ê">ÂÑøÂ≠ê</div>
                                    </div>
                                    <div class="fancy-select-group">
                                        <div class="fancy-select-group-label"><i class="ph ph-users-three"></i> Áà∂ÊØç</div>
                                        <div class="fancy-select-option" data-value="Áà∏Áà∏">Áà∏Áà∏</div>
                                        <div class="fancy-select-option" data-value="Â¶àÂ¶à">Â¶àÂ¶à</div>
                                        <div class="fancy-select-option" data-value="ÂÖ¨ÂÖ¨">ÂÖ¨ÂÖ¨</div>
                                        <div class="fancy-select-option" data-value="Â©ÜÂ©Ü">Â©ÜÂ©Ü</div>
                                    </div>
                                    <div class="fancy-select-group">
                                        <div class="fancy-select-group-label"><i class="ph ph-users"></i> Á•ñËæà</div>
                                        <div class="fancy-select-option" data-value="Áà∑Áà∑">Áà∑Áà∑</div>
                                        <div class="fancy-select-option" data-value="Â•∂Â•∂">Â•∂Â•∂</div>
                                        <div class="fancy-select-option" data-value="Â§ñÂÖ¨">Â§ñÂÖ¨</div>
                                        <div class="fancy-select-option" data-value="Â§ñÂ©Ü">Â§ñÂ©Ü</div>
                                    </div>
                                    <div class="fancy-select-group">
                                        <div class="fancy-select-group-label"><i class="ph ph-plus-circle"></i> Êõ¥Â§ö</div>
                                        <div class="fancy-select-option" data-value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="characterDesc" data-i18n="characters.description">ÊèèËø∞ÔºàÂèØÈÄâÔºâ</label>
                            <input type="text" id="characterDesc" placeholder="ÁÆÄÂçïÊèèËø∞Ëøô‰∏™ËßíËâ≤" />
                        </div>
                        
                        <!-- ÁÖßÁâáÁÆ°ÁêÜ -->
                        <div class="character-photos-section" id="characterPhotosSection" style="display: none;">
                            <label data-i18n="characters.photos">ÂèÇËÄÉÁÖßÁâá</label>
                            <p class="form-hint" data-i18n="characters.photos.hint">‰∏ä‰º†‰∏çÂêåËßíÂ∫¶ÁöÑÊ∏ÖÊô∞ÁÖßÁâáÔºåÂ∏ÆÂä© AI Êõ¥Â•ΩÂú∞ÈîÅÂÆöÈù¢ÈÉ®ÁâπÂæÅ</p>
                            
                            <div class="character-photos-grid" id="characterPhotosGrid">
                                <!-- Áî± JS Âä®ÊÄÅÁîüÊàê -->
                            </div>
                            
                            <div class="photo-upload-area" id="photoUploadArea">
                                <input type="file" id="photoUploadInput" accept="image/*" onchange="handlePhotoUpload(event)" class="file-input-hidden" />
                                <label for="photoUploadInput" class="photo-upload-btn">
                                    <i class="ph ph-camera"></i>
                                    <span data-i18n="characters.upload.photo">‰∏ä‰º†ÁÖßÁâá</span>
                                </label>
                                <span class="photo-limit-text" id="photoLimitText"></span>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeEditCharacterModal()">
                                <span data-i18n="common.cancel">ÂèñÊ∂à</span>
                            </button>
                            <button type="submit" class="btn btn-primary" id="saveCharacterBtn">
                                <span data-i18n="common.save">‰øùÂ≠ò</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Toast ÈÄöÁü• -->
        <div class="toast-container" id="toastContainer"></div>

        <script src="app.js"></script>
    </body>
</html>
